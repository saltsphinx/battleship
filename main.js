(()=>{var t={661:(t,e,r)=>{const i=r(884);t.exports=function(){const t={},e={},r={};let n=0,o=0;function s(e,r,i){if(t[e])return!1;const n=[e],o=e.split(",").map((t=>+t)),s="right"==i?1:0;for(let e=0;e<r-1;e++){if(o[s]=o[s]+1,t[o])return!1;if(o[0]<0||o[0]>9||o[1]<0||o[1]>9)return!1;n.push(Array.from(o).toString())}return n}for(let e=0;e<10;e++)for(let r=0;r<10;r++)t[`${e},${r}`]=void 0;return{ships:r,coordinates:t,hitCoordinates:e,placeShip:function(e,o,a){const c=s(e,o,a);if(!c)return!1;const d=i(o,c,a);c.forEach((e=>t[e]=d)),r[e]=d,n+=o},receiveAttack:function(r){if("string"!=typeof r)throw new Error("parameter must be a string");if(e[r])return!1;e[r]=!0;const i=t[r];return i?(i.hit(),o++,"hit"):"miss"},allSunken:function(){return o>=n},generateCoordinates:s}}},312:t=>{const e=[document.querySelector(".player-grid"),document.querySelector(".ai-grid")],r={},i={},n=[r,i],o=document.querySelector(".notifier");let s,a;function c(t,e=6500){s&&(s(!0),clearTimeout(a));const r=new Promise((t=>s=t));var i;o.textContent=t,o.classList.remove("hide"),Promise.race([r,(i=e,new Promise((t=>{a=setTimeout((()=>t(!1)),i)})))]).then((t=>{t||o.classList.add("hide")}))}t.exports={resetGrids:function(){e.forEach((t=>{let e=t.firstChild;for(;e;)e.remove(),e=t.firstChild})),function(){for(let t=0;t<2;t++){const r=e[t],i=n[t];for(let t=0;t<10;t++)for(let e=0;e<10;e++){const n=[t,e].toString(),o=document.createElement("div");o.classList.add("grid-coordinate",n),r.append(o),i[n]=o}}}()},setupEnemy:function(t){e[1].addEventListener("click",t)},hitNotifier:c,renderAttack:function(t,e){switch(e){case"miss":c("The attack missed"),t.classList.add("miss");break;case"hit":c("The attack hit"),t.classList.add("hit")}},swapOpacity:function(t){"player"==t?(e[0].classList.add("dim"),e[1].classList.remove("dim")):"ai"==t?(e[1].classList.add("dim"),e[0].classList.remove("dim")):(e[0].classList.remove("dim"),e[1].classList.remove("dim"))},playerGrid:r,aiGrid:i}},403:(t,e,r)=>{const i=r(312),n=r(62);let o,s,a=!1;const c=[5,4,2,2,1],d=["right","bottom"];function u(t){c.forEach((e=>{const r=d[Math.floor(2*Math.random())];let i=t.placeShip(l(),e,r);for(;!1===i;)i=t.placeShip(l(),e,r)}))}function l(){const[t,e]=[Math.floor(10*Math.random()),Math.floor(10*Math.random())];return[t,e].toString()}async function f(t){if(!a)return;const e=t.target;if(!e.classList.contains("grid-coordinate"))return;const r=s.board,n=e.classList[1],c=r.receiveAttack(n);return 0==c?i.hitNotifier("Square has already been attacked",1250):(a=!1,i.renderAttack(e,c),"hit"==c?r.allSunken()?p("player"):void(a=!0):(await m(1250),i.swapOpacity("ai"),void(await async function(){const t=o.board;let e=h(),r=i.playerGrid[e];await m(500);let n=t.receiveAttack(e);for(;"hit"==n;){if(i.hitNotifier("The AI hits"),i.renderAttack(r,n),t.allSunken())return!0;await m(1250),e=h(),r=i.playerGrid[e],n=t.receiveAttack(e)}i.renderAttack(r,n),i.hitNotifier("The AI misses"),await m(1250)}()?p("ai"):(a=!0,i.swapOpacity("player"),i.hitNotifier("Your turn",2e3)))))}function h(){let t=l();const e=o.board;for(;e.hitCoordinates[t];)t=l();return t}function p(t){i.swapOpacity(),"player"==t?i.hitNotifier("You win!"):i.hitNotifier("The AI wins!")}function m(t){return new Promise((e=>{setTimeout((()=>e()),t)}))}t.exports={init:function(){o=n(),s=n(),u(o.board),u(s.board),i.resetGrids(),function(t,e){const r=i.playerGrid;Object.values(e).forEach((t=>{const e=t.coords,i=t.direction;for(let t=0;t<e.length;t++){const n=r[e[t]];n.classList.add(i,"ship"),0==t&&n.classList.add("first"),t==e.length-1&&n.classList.add("last")}}))}(0,o.ships),i.setupEnemy(f),i.hitNotifier("Your turn",7500),i.swapOpacity("player"),a=!0,console.log(1)}}},62:(t,e,r)=>{const i=r(661);t.exports=function(){const t=i();return{board:t,ships:t.ships}}},884:t=>{t.exports=function(t,e,r){if("number"!=typeof t)throw new Error("Non-number passed as parameter Ship Factory");if(t<1||t>5)throw new Error("Length must be between 1 and 5");if(!Array.isArray(e)||0==e.length)throw new Error("Second parameter must be a non-empty array");return{length:t,hits:0,coords:e,direction:r,hit:function(){this.hits++},isSunk:function(){return this.hits>=this.length}}}}},e={};(function r(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,r),o.exports})(403).init()})();